
'detectCameraMovement' should be ran by the control loop, its responsibility is to detect if there is any movement from the camera and update the movement playlist file and movement database entry accordingly.  If should not run ffmpeg or handle any video processing itself, that is the responsibility of other functions in the movement pipeline.  this should be a quick function that easily runs withing the control loop cycle time (e.g. 1 second).

'triggerProcessMovement` should be idempotent,  triggered by the control loop (and detectCameraMovement), its responsibility is to check where it is upto processing entries in the movement database (using a position pointer/cursor), and start the ffmpeg process accordingly to process any new movement entries,  it should update the position pointer/cursor in the movement database as it processes each entry. it processes one movement entry at a time, hence the separation from detectCameraMovement, its fine if it falls behind a little as long as it eventually catches up.  The assumption is ffmpeg processing will terminate by itself when done, the ffmpeg process close event handler should close off the movement. 'triggerProcessMovement' should not move on to the next movement entry until the current ffmpeg process has completed & the movement finished. we have a configurable max ffmpeg processing time limit, if the ffmpeg process exceeds this time limit, we should kill the ffmpeg process and mark the movement entry as failed in the movement database, then move on to the next movement entry.